<?xml version="1.0" encoding="windows-1251" ?>
<?xml:stylesheet type="text/xsl" href="common/layout.xsl" ?>

<lesson title="Урок №2: Введение в языки разметки" next="section5.xml" prev="section3.xml" summ="0">
<h2>Кодировка документа.</h2>

<p>В общем случае <b>кодировка (encoding)</b>, или <b>кодовая таблица</b>, — это однозначное соответствие между подмножеством целых чисел (как правило, идущих подряд) и некоторым набором символов. Ключевым здесь является понятие <b>символа</b>. Символ может быть буквой (а может и не быть), может соответствовать звуку речи (а может и не соответствовать) и может быть представлен графическим знаком (но может обходиться и без какого бы то ни было видимого образа). Символ — это атом смысла, мельчайшая неделимая частица информации.
</p>
<p>Так, латинское «А» и кириллическое «А» — это разные символы, потому что они употребляются в разных контекстах и несут в себе разную информацию. 
</p>

<p>Определяющим для любой кодировки является количество охватываемых ею кодов и, соответственно, символов. Поскольку тексты в компьютере хранятся в виде последовательности байтов, большинство кодировок естественным образом распадаются на <b>однобайтовые</b>, или восьмибитные, способные закодировать не больше <b>256</b> символов, и <b>двухбайтовые</b>, или шестнадцатибитные, чья емкость может достигать <b>65636</b> знакомест.
</p>
	
<h3>ASCII</h3>
<p>Прежде чем переходить к восьмибитным кодировкам, нужно сказать несколько слов о кодировке под названием <b>ASCII</b> (<i>American Standard Code for Information Interchange</i>) — кодировке также восьмибитной, но охватывающей только <b>128</b> символов и потому довольствующейся семью значимыми битами (старший, восьмой бит при этом всегда равен нулю). Важность этой кодировки, включающей латинский алфавит, цифры и основные знаки пунктуации, необычайно велика: почти все остальные (большие по размеру) кодировки совместимы с ней, т. е. размещают на своих первых 128 знакоместах те же самые символы в том же порядке.
</p>
<p>Первые 32 позиции в кодировке ASCII заняты так называемыми управляющими символами (control characters), предназначенными не для передачи собственно текстовой информации, а для управления устройством, читающий (или получающим по линии связи) текстовый файл. Лишь немногие из этих символов — возврат каретки, перевод строки, табуляция — до сих пор используются в более-менее общепринятых значениях; остальные, давно уже вышедшие из употребления, в былые времена выполняли для «голого» ASCII-текста те же функции, которые сейчас возложены на разнообразные форматы данных и протоколы связи.
</p>
<p>Задействовав в кодировке ASCII старший бит, мы получаем дополнительные 128 знакомест, которых должно хватить для кодирования, например, кириллического алфавита или набора каких-нибудь специальных символов. К сожалению, восьмибитных кодировок на свете существует гораздо больше, чем наборов символов, которые они кодируют. Очень характерна в этой связи ситуация с русским языком — анархия компьютеризации в  нашей  стране,  наложившаяся  на  всемирную анархию конкурирующих компьютерных платформ и операционных систем, привела к тому, что для кириллицы существует сразу несколько однобайтовых кодовых таблиц.
</p>

<h3>Однобайтовые кодировки</h3>
<h5>КОИ8</h5>
<p>Хронологически одним из первых стандартов кодирования русских  букв  на  компьютерах  был <b>КОИ8</b> (<i>«Код  обмена информацией, 8-битный»</i>). Эта кодировка применялась еще  в доисторические советские  времена на  компьютерах <b>ЕС ЭВМ</b>, и когда в середине 80-х появились первые русифицированные версии операционной системы UNIX, они унаследовали эту кодировку у своих «предков». В результате КОИ8 является сейчас одной  из кодировок, которые обязательно должна поддерживать любая русская web-страница.
</p>

<h5>Windows-1251</h5>
<p>Вторая по значению в русском Интернете (и, безусловно, первая по употребимости на персональных компьютерах) кодировка — это стандартная кириллическая кодировка Microsoft Windows, обозначаемая аббревиатурой <b>СР1251</b> («СР» расшифровывается как «Code Page», «кодовая страница»). Все Windows-приложения, работающие с русским языком, обязаны понимать эту кодировку без перевода. Благодаря распространенности Windows кодировка СР1251, вместе с КОИ8, входит в абсолютный минимум кодировок, которые приходится поддерживать русскоязычным сайтам.
</p>

<h5>Семейство 8859. Latin-1</h5>
<p>Похожая ситуация с конкурирующими платформами и операционными системами и, как следствие, с конкурирующими несовместимыми кодировками наблюдается и в других языках, пользующихся своим собственным алфавитом или даже латинским алфавитом с расширениями. Международная организация по стандартизации (International Standards Organization, <b>ISO</b>) попыталась навести порядок в восьмибитных кодировках, создав серию кодировок <b>ISO 8859</b>, расширяющих таблицу ASCII для латинских букв с диакритикой и лигатур (кодировка <b>ISO 8859-1</b>), кириллицы (<b>ISO 8859-5</b>), арабского (<b>ISO 8859-6</b>), греческого (<b>ISO 8859-7</b>), и других алфавитов.
</p>
<p>Если кодировка ISO 8859-5 для кириллицы так и не прижилась, первая из этой серии — кодировка <b>ISO 8859-1</b>, известная также под именем <b>Latin-1</b>, — сумела стать общепринятым стандартом для кодирования «расширенной» латиницы. В эту кодировку включены почти все символы, употребляющиеся в письменностях западноевропейских языков — французского, немецкого, испанского и т.д.
</p>

<h3>Двухбайтовые кодировки</h3>
<p>Языки с иероглифической письменностью (японский, китайский, корейский) пользуются смешанными кодировками, в которых иероглифы (а их в сотни раз больше, чем букв в алфавите) представлены двухбайтовыми кодами, а вставки на латинице кодируются по однобайтовой таблице (обычно совпадающей с Latin-1). Переключение между двухбайтовым и однобайтовым режимами производится специально зарезервированными управляющими символами.
</p>
<p>В 1991 году была предпринята попытка создать единую универсальную двухбайтовую кодировку, охватывающую все алфавиты и иероглифические системы мира. Результатом стал стандарт под названием <b>Unicode</b>, покрывающий не только системы письменности всех живых и большинства мертвых языков мира, но и множество музыкальных, математических, химических и прочих символов. Хотя массовое применение Unicode в документах и программах остается делом будущего, для web-дизайнера эта кодировка имеет особое значение, так как именно она объявлена «стандартной кодировкой документа» в HTML начиная с версии 4.
</p>

<h5>ISO 10646 и UTF-8</h5>
<p>Предвидя неизбежное рано или поздно исчерпание и двухбайтового кодового пространства (пока еще до этого далеко, так как около 30% кодов в Unicode до сих пор не заняты), ISO уже застолбила стандарт четырехбайтовой, совместимой с Unicode кодировки под названием <b>ISO 10646</b>. Пока что вместо этого обозначения, которое то и дело попадается в стандартах, вы можете с чистой совестью подставлять «Unicode», так как никаких новых символов, выходящих за границы совпадающих с Unicode первых 65536 знакомест, в ISO 10646 еще не определено.
</p>	

<p>По-видимому, в ближайшее время все более важную роль будет играть особый формат Unicode (и ISO 10646) под названием <b>UTF-8</b>. Эта «производная» кодировка пользуется для записи символов цепочками байтов	различной длины (от одного до шести), которые с помощью несложного алгоритма преобразуются в Unicode-коды, причем более употребительным символам соответствуют более короткие цепочки. Главное достоинство этого формата — совместимость с ASCII не только по значениям кодов, но и по количеству бит на символ, так как для кодирования любого из первых 128 символов в UTF-8 достаточно одного байта (хотя, например, для букв кириллицы нужно уже по два байта).
</p>

<h3>Указание кодировки документа</h3>
<p>Для указания кодировки символов web-страницы используются следующие обозначения кодовых таблиц:
</p>
<ul>
    <li><b>windows-1251</b> - кириллица Windows</li> 
    <li><b>KOI8-R</b> - кодировка КОИ8 для русского языка</li> 
    <li><b>KOI8-U</b> - кодировка КОИ8 для украинского языка</li> 
    <li><b>ISO 8859-1</b> - кодировка Latin-1</li> 
    <li><b>ISO 8859-5</b> - кодировка семейства ISO 8859 для символов кирилицы</li> 
    <li><b>UTF-8</b> - кодировка UTF-8</li> 
    <li><b>Unicode</b> - кодировка Unicode</li> 
</ul>

<p>На web-странице указать кодировку документа можно двумя cпособами:
</p>
<ul>
    <li>XML декларация: <code>&lt;?<tag>xml</tag> <attr>version</attr>=<str>"1.0"</str> <attr>encoding</attr>=<str>"<b>windows-1251</b>"</str>?&gt;</code></li> 
    <li>Элемент <b>meta</b>: &lt;<tag>meta</tag> <attr>http-equiv</attr>=<str>"content-type"</str> <attr>content</attr>=<str>"text/html; charset=<b>windows-1251</b>"</str> /&gt;</li> 
</ul>
<p>Элемент <b>meta</b> является дочерним по отношению к разделу заголовка документа (<b>head</b>) и служит для указания типа и кодировки содержимого страницы. Типом содержимого является структурированный текст в формате <b>html</b> (<i>text/html</i>), используемая кодировка кириллица windows (<i>charset=windows-1251</i>).
</p>
<p>Обычно используют оба способа одновременно. Например, для указания кодировки КОИ8 для украинского языка на web-странице, используют следующую структуру документа:
</p>
<example>
&lt;?<tag>xml</tag> <attr>version</attr>=<str>"1.0"</str> <attr>encoding</attr>=<str>"<b>KOI8-U</b>"</str>?&gt;
&lt;<tag>!DOCTYPE</tag> html <b>PUBLIC</b> ... &gt;
&lt;<tag>html</tag> <attr>xmlns</attr>=<str>"http://www.w3.org/1999/xhtml"</str>&gt;
    &lt;<tag>head</tag>&gt;
        &lt;<tag>title</tag>&gt;Моя перша сторiнка&lt;/<tag>title</tag>&gt;
        &lt;<tag>meta</tag> <attr>http-equiv</attr>=<str>"Content-Type"
             </str><attr>content</attr>=<str>"text/html; charset=<b>KOI8-U</b>"</str> /&gt;
    &lt;/<tag>head</tag>&gt;

    ...

&lt;/<tag>html</tag>&gt;
</example>

<p>Будьте внимательны! При сохранении текста выбирайте ту же кодировку, что указали на web-странице. Воспользуйтесь <a href="samples/example_2.4.1.html" target="_blank"><b>этой ссылкой</b></a> чтобы посмотреть пример страницы с несоответствием кодировок. Страница использует кодировку "KOI8-R", а сохранена в кодировке "windows-1251".
</p>							 
<p>К слову, браузер можно "вручную" переключить на использование требуемой кодировки. Для этого воспользуйтесь  меню <b>Вид/Кодировка</b> ( <b>View/Enconing</b> ) и выберите требуемую кодировку (в предыдущем примере выберите "Кириллица (Windows)").
</p>
												 
<p>Поэкспериментируйте с различными кодировками, и вы убедитесь, что символы литинского алфавита, цифры и знаки пунктуации передаются без изменений в подавляющем большинстве из них.
</p>


</lesson>
